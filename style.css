body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'Quicksand', sans-serif;
    background-color: #fce4ec; 
    color: #4a4a4a;
    overflow: hidden; 
}

/* --- backgroudn image --- */
#screen-1,
#screen-2, 
#screen-3, 
#screen-4, 
#screen-5 {
    background-color: #fce4ec;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cg fill='%23e91e63' fill-opacity='0.35'%3E%3C!-- Herz 1 (Oben Links) --%3E%3Cpath d='M11 10h1v1h-1zM13 10h1v1h-1zM10 11h1v1h-1zM12 11h1v1h-1zM14 11h1v1h-1zM11 12h1v1h-1zM13 12h1v1h-1zM12 13h1v1h-1z'/%3E%3C!-- Herz 2 (Unten Rechts, leicht transparenter) --%3E%3Cpath d='M41 38h1v1h-1zM43 38h1v1h-1zM40 39h1v1h-1zM42 39h1v1h-1zM44 39h1v1h-1zM41 40h1v1h-1zM43 40h1v1h-1zM42 41h1v1h-1z' fill-opacity='0.25'/%3E%3C/g%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 90px 90px; 
    background-attachment: fixed;
}

/* --- screens --- */
.screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
    background-color: #fce4ec;
    opacity: 0;
    visibility: hidden;
    transition: opacity 1s ease-in-out;
    z-index: 1;
}

.screen.active {
    opacity: 1;
    visibility: visible;
    z-index: 10;
}

/* --- Valentinesfrage passend seteztem --- */
#screen-4 h1 {
    margin-bottom: 10px; /* Nur noch 10px Abstand */
    margin-top: 0;
    position: relative;
    z-index: 20; 
    transition: transform 0.3s ease; 
    line-height: 1.2;
}

/* --- default bidler und texte --- */
.main-image {
    max-width: 80%;
    max-height: 40vh;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    object-fit: cover;
}

/* --- SCREEN 2: Brief like setup --- */
.paper-note {
    background-color: #fff9c4;

    background-image: 
        linear-gradient(to right, transparent 70px, #ef9a9a 70px, #ef9a9a 72px, transparent 72px),
        linear-gradient(to bottom, #fff9c4 100%, #fff9c4 100%),
        linear-gradient(to bottom, transparent, transparent calc(100% - 1px), #9e9e9e calc(100% - 1px));

    background-size: 
        100% 100%,   
        100% 3.5rem,  
        100% 2.2rem;  

    background-position:
        0 0,          
        0 0,          
        0 0;          

    background-repeat: 
        no-repeat,    
        no-repeat,    
        repeat;      

    background-attachment: local;

    line-height: 2.2rem; 
    text-align: left;
    
    padding: 40px 40px 30px 90px; 

    border-radius: 2px;
    box-shadow: 3px 3px 10px rgba(0,0,0,0.2);
    
    font-family: 'Dancing Script', cursive;
    font-size: 1.6rem;
    color: #3e2723;
    
    transform: rotate(-2deg);
    max-width: 600px;
    width: 90%;
    
    /* Scroll-Logik */
    /*max-height: 55vh; 
    overflow-y: auto; 
    scrollbar-width: thin;
    scrollbar-color: #a1887f transparent;*/
}

/* Scrollbar Design */
.paper-note::-webkit-scrollbar {
    width: 8px;
}
.paper-note::-webkit-scrollbar-track {
    background: transparent; 
}
.paper-note::-webkit-scrollbar-thumb {
    background-color: #a1887f;
    border-radius: 10px;
    border: 2px solid #fff9c4;
}

/* --- slideshow mit polaroid rahmen bauen --- */
.slideshow-container {
    width: 22vw; 
    height: 28vw; 
    
    min-width: 320px; 
    min-height: 380px;
    max-width: 500px; 
    max-height: 600px;

    position: relative;
    margin: 0 auto 15px auto; 
    background-color: #ffffff; 

    padding: 0; 
    
    border-radius: 2px; 
    box-shadow: 0 15px 35px rgba(0,0,0,0.25); 
    transform: rotate(-3deg); 
    transform-origin: center center; 
    transition: transform 0.3s ease; 
    z-index: 15; 
    box-sizing: border-box; 
}

/* Hover-Effekt: Foto dreht sich gerade */
.slideshow-container:hover {
    transform: rotate(0deg) scale(1.02);
}

.slide {
    position: absolute;
    
    top: 15px;
    left: 15px;
    
    /* 100% -links (15) -rechts (15)--> 30px */
    width: calc(100% - 30px);
    
    /* 100% -oben (15) -unten (60)--> 75px */
    height: calc(100% - 75px);
    
    object-fit: cover;
    
    border: 1px solid #eee; 

    box-sizing: border-box; 
    
    border-radius: 0;
    opacity: 0;
    transition: opacity 1s ease-in-out;
}

.slide.active { opacity: 1; }

/* --- alle knöpfe --- */
.btn {
    padding: 15px 30px;
    font-size: 1.2rem;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    margin: 8px; 
    font-family: 'Quicksand', sans-serif;
    font-weight: 600;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), background-color 0.3s;
    white-space: nowrap; 
}

.btn-primary { background-color: #e91e63; color: white; }
.btn-yes { 
    background-color: #4CAF50; color: white; 
    position: relative;
    z-index: 10; 
}
.btn-no { background-color: #f44336; color: white; }

.btn:hover {
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
    transform: scale(1.05);
}

/* Back Button */
.back-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid #e91e63;
    border-radius: 30px;
    padding: 8px 16px;
    font-size: 1rem;
    font-weight: 600;
    color: #e91e63;
    cursor: pointer;
    z-index: 200;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.2s;
}

.back-btn:hover {
    transform: scale(1.05);
    background: #e91e63;
    color: white;
}

/* --- yes button full screen change --- */
.fullscreen-yes {
    position: fixed !important;
    top: 0;
    left: 0;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 1000;
    border-radius: 0 !important;
    font-size: 4rem !important; 
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
    animation: growIn 0.8s ease-out forwards, pulse 2s infinite 1s;
}

.button-container {
    display: flex;
    justify-content: center;
    align-items: center; 
    flex-wrap: wrap;
    gap: 15px;
    min-height: 50px; /* Reduziert */
    width: 100%; 
    margin-top: 5px; 
}

h1 { font-size: 2.5rem; margin-bottom: 20px; color: #d81b60; }

.date-input {
    padding: 15px;
    font-size: 1.2rem;
    border: 2px solid #e91e63;
    border-radius: 10px;
    width: 200px;
    text-align: center;
    font-family: 'Quicksand', sans-serif;
    outline: none;
    color: #4a4a4a;
    background: rgba(255, 255, 255, 0.8);
}
.date-input:focus { box-shadow: 0 0 10px rgba(233, 30, 99, 0.3); }

@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  50% { transform: translateX(10px); }
  75% { transform: translateX(-10px); }
  100% { transform: translateX(0); }
}
.shake { animation: shake 0.3s ease-in-out; border-color: red !important; }

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes growIn {
    0% { transform: scale(0.1); opacity: 0; border-radius: 100%; }
    100% { transform: scale(1); opacity: 1; border-radius: 0; }
}

/* --- Blitz auf dem yes button--- */
.yes-pulse-anim {
    animation: flashGlow 0.3s ease-out;
}

@keyframes flashGlow {
    0% { 
        filter: brightness(1); 
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    50% { 
        filter: brightness(1.3); /* Heller werden */
        box-shadow: 0 0 20px rgba(76, 175, 80, 0.6); /* Grüner Glow */
    }
    100% { 
        filter: brightness(1); 
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
}

/* --- Pfeile--- */

.arrow-cue {
    position: fixed;
    font-size: 3rem;
    color: #f44336;
    font-weight: bold;
    opacity: 0; 
    z-index: 2000;
    pointer-events: none;
    text-shadow: 2px 2px 0px white;
    
    transform-origin: center center;
    transform: rotate(var(--rot)) translateX(0);
}

.arrow-anim {
    animation: poke 0.4s ease-out forwards;
}

@keyframes poke {
    0% { 
        opacity: 0;
        
        transform: rotate(var(--rot)) translateX(-60px); 
    }
    50% { 
        opacity: 1;
        transform: rotate(var(--rot)) translateX(0); 
    }
    100% { 
        opacity: 0;
        transform: rotate(var(--rot)) translateX(0); 
    }
}

/* ---SCREEN 1 --- */

.framed-image-container {
    position: relative;
    display: inline-block;
    margin: 10px 0;
    z-index: 5;

    background-color: #fff9c4; 
    padding: 15px; 
    
    border: 3px solid #e91e63; 
    box-shadow: 
        0 0 0 5px #fff9c4, 
        0 15px 35px rgba(0,0,0,0.2); 
    
    border-radius: 4px; 
    transform: rotate(-2deg); 
    transition: transform 0.3s ease;
}
#screen-1 h1,
#screen-1 .btn-primary {
    max-width: 80%; 
    margin-left: auto;
    margin-right: auto;
}

#screen-1 p {
    max-width: 60%; 
    margin-left: auto;
    margin-right: auto;
    position: relative;
    z-index: 25; 
}

.framed-image-container:hover {
    transform: rotate(0deg) scale(1.02);
}

/* Bild im Rahmen */
.framed-image {
    display: block;
    max-width: 50vw; 
    max-height: 45vh; 
    width: auto;
    height: auto;
    border-radius: 2px;
    object-fit: contain;
    min-height: 150px; 
}

/* Bubbles */
.floating-phrase {
    position: absolute;
    font-family: 'Dancing Script', cursive; 
    font-weight: bold;
    color: #c2185b; 
    z-index: 20; 
    
    max-width: 15vw; 
    min-width: 110px;
    
    font-size: clamp(0.85rem, 1.2vw, 1.3rem);
    
    text-align: center; 
    line-height: 1.3;
    
    background-color: rgba(255, 255, 255, 0.95); 
    padding: 8px 12px;
    border-radius: 18px; 
    border: 2px solid #fff9c4; 
    box-shadow: 2px 4px 8px rgba(0,0,0,0.1); 
    
    transition: all 0.4s ease-out;
    cursor: pointer;
    animation: floaty 4s ease-in-out infinite;
}

/* --- Bubbles hover effekte --- */
.floating-phrase:hover {
    animation-play-state: paused;
    transform: scale(1.1) rotate(var(--deg)) !important; 
    box-shadow: 0 15px 25px rgba(0,0,0,0.25);
    border-color: #e91e63; 
    background-color: #fff;
    z-index: 30; 
}

/* Animation fürs Schweben */
@keyframes floaty {
    0%, 100% { transform: translateY(0) rotate(var(--deg)); }
    50% { transform: translateY(-8px) rotate(var(--deg)); }
}

/* Positionierung  */
.phrase-1 {
    top: 12%; 
    left: 6%; 
    --deg: -10deg; 
    transform: rotate(-10deg);
}

.phrase-2 {
    top: 15%; 
    right: 6%; 
    --deg: 8deg;
    transform: rotate(8deg);
}

.phrase-3 {
    bottom: 22%; 
    left: 5%; 
    top: auto;
    --deg: 5deg;
    transform: rotate(5deg);
    color: #e91e63;
}

.phrase-4 {
    bottom: 20%; 
    right: 5%; 
    top: auto;
    --deg: -5deg;
    transform: rotate(-5deg);
    font-size: clamp(1.2rem, 1.8vw, 1.6rem); 
}

/* --- Bubbles ausblenden bei switch --- */
.screen:not(.active) .floating-phrase {
    opacity: 0;
    transition: opacity 0.1s ease; 
}

.screen.active .floating-phrase {
    opacity: 1;
    transition: opacity 0.5s ease 0.3s, all 0.4s ease-out; 
}

/* --- Screen 5 Final gif und pixel art herz rahmen --- */

.final-wrapper {
    position: relative;
    display: inline-block;
    margin-bottom: 30px;
    z-index: 10;

    background-color: #fce4ec; /* Überdeckt das Muster */
    padding: 25px; /* Platz um das Bild herum */
    border-radius: 30px; /* Weiche, runde Ecken für die Box */
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

.final-gif-img {
    display: block;
    
    /* Größen für Desktop */
    width: 100%;
    max-width: 35vw;
    min-width: 350px; 
    
    height: auto;
    
    /* --- NEU: Styles angepasst --- */
    border-radius: 15px; /* Das Bild selbst leicht abrunden */
    /* box-shadow, background, padding wurden entfernt, da jetzt im Wrapper */
    transform: none;
}

/* --- Pixel art herzen bauen--- */
.pixel-heart {
    position: absolute;
    background-repeat: no-repeat;
    background-size: contain;
    z-index: 20; 
    
    image-rendering: pixelated; 
    image-rendering: crisp-edges; 
    
    animation: pixelBounce 0.6s steps(2, start) infinite alternate;
}

/* --- große version 7px x 6px --- */
.large { 
    /* scale *7 */
    width: 49px; 
    height: 42px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 7 6' shape-rendering='crispEdges'%3E%3C!-- Fill --%3E%3Crect x='1' y='1' width='2' height='1' fill='%23FDE0E0'/%3E%3Crect x='4' y='1' width='2' height='1' fill='%23FDE0E0'/%3E%3Crect x='1' y='2' width='5' height='1' fill='%23FDE0E0'/%3E%3Crect x='2' y='3' width='3' height='1' fill='%23FDE0E0'/%3E%3Crect x='3' y='4' width='1' height='1' fill='%23FDE0E0'/%3E%3C!-- Border --%3E%3Cpath fill='%23FFB4C3' d='M1 0h2v1H1zM4 0h2v1H4zM0 1h1v2H0zM3 1h1v1H3zM6 1h1v2H6zM1 3h1v1H1zM5 3h1v1H5zM2 4h1v1H2zM4 4h1v1H4zM3 5h1v1H3z'/%3E%3C/svg%3E");
}

/* --- kleines herz 5x4 --- */
.small { 
    /* scale *6*/
    width: 30px; 
    height: 24px; 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 4' shape-rendering='crispEdges'%3E%3C!-- Fill (jetzt geteilt) --%3E%3Crect x='1' y='1' width='1' height='1' fill='%23FDE0E0'/%3E%3Crect x='3' y='1' width='1' height='1' fill='%23FDE0E0'/%3E%3Crect x='2' y='2' width='1' height='1' fill='%23FDE0E0'/%3E%3C!-- Border (Pixel bei 2,0 entfernt, bei 2,1 hinzugefügt) --%3E%3Cpath fill='%23FFB4C3' d='M1 0h1v1H1zM3 0h1v1H3zM0 1h1v1H0zM4 1h1v1H4zM1 2h1v1H1zM3 2h1v1H3zM2 3h1v1H2zM2 1h1v1H2z'/%3E%3C/svg%3E");
}

/* --- set Pos --- */

/* Oben Rechts - Groß */
.p-top-right {
    top: -20px;
    right: -25px;
}

/* Mitte Rechts - Groß */
.p-mid-right {
    top: 50%;
    right: -35px;
    transform: translateY(-50%);
    animation-delay: -0.3s; 
}

/* Links Oben - Klein */
.p-left-1 {
    top: 15%;
    left: -20px;
    animation-delay: -0.5s;
}

/* Links Unten - Klein */
.p-left-2 {
    bottom: 20%;
    left: -25px;
    animation-delay: -0.2s;
}

/* Unten Rechts - Klein */
.p-bot-right {
    bottom: -10px;
    right: 15px;
    animation-delay: -0.4s;
}

/* --- choppy ahhh animation --- */
@keyframes pixelBounce {
    0% { transform: translateY(0); }
    100% { transform: translateY(-6px); }
}

/* Text screen 5 setting*/
#screen-5 h1 {
    font-size: 2.5rem;
    color: #e91e63;
    text-shadow: 2px 2px 0 #fff;
    margin-top: 15px;
}

@media (max-width: 768px) {
    h1 { font-size: 1.8rem; margin-bottom: 15px; }

    #screen-1 p { max-width: 90%; font-size: 1rem; }

    /* --- Screen 1 --- */
    .framed-image { 
        max-height: 30vh; 
        max-width: 85vw;
    }
    .framed-image-container {
        padding: 8px;
        margin: 10px 0;
    }
    
    /* --- screen 1 bubbles --- */
    .floating-phrase {
        font-size: 0.85rem;
        padding: 6px 10px;
        max-width: 120px;
        border-radius: 15px;
    }
    .phrase-4 { font-size: 1rem; }

    .phrase-1 { 
        top: 10%; 
        left: 3%; 
    }
    .phrase-2 { 
        top: 8%; 
        right: 3%; 
    }
    
    .phrase-3 { bottom: 16%; left: 2%; top: auto; } 
    .phrase-4 { bottom: 16%; right: 2%; top: auto; }
    
    
    /* --- screen 2 brief  --- */
    .paper-note {
        background-image: 
            linear-gradient(to right, transparent 25px, #ef9a9a 25px, #ef9a9a 27px, transparent 27px),
            linear-gradient(to bottom, #fff9c4 100%, #fff9c4 100%),
            linear-gradient(to bottom, transparent, transparent calc(100% - 1px), #9e9e9e calc(100% - 1px));
        
        /* Zeilenabstand */
        background-size: 
            100% 100%,    
            100% 3.5rem,  
            100% 1.8rem; 

        line-height: 1.8rem; 
        font-size: 1.1rem;   
        padding: 30px 20px 30px 45px; 
        
        width: 90%;
        max-width: 90%;
    }

    /* --- screen 4 slideshow --- */
    .slideshow-container {
        width: 280px; 
        height: 360px; 
        min-width: 0; 
        min-height: 0;
        margin-bottom: 20px;
        transform: rotate(-2deg);
    }
    
    /* --- screen 5 --- */
    .final-wrapper {
        padding: 15px; 
        border-radius: 20px; 
        margin-bottom: 20px;
    }
    .final-gif-img {
        max-width: 260px; 
        min-width: 0;
    }
    
    /* Buttons */
    .btn { padding: 12px 24px; font-size: 1.1rem; }
}

@media (max-height: 700px) and (min-width: 769px) {
    .framed-image { max-height: 35vh; }
    
    .slideshow-container { 
        width: 18vw; 
        height: 24vw;
        min-width: 250px; 
        min-height: 320px; 
    }
    
    /* Bubbles */
    .phrase-1 { top: 5%; }
    .phrase-2 { top: 5%; }
    
    h1 { font-size: 2rem; }
}

@media (max-width: 380px) {
    .slideshow-container { width: 240px; height: 310px; }
    .paper-note { font-size: 1rem; padding-left: 40px; }
}

/* --- DEBUGGING --- */
.debug-obstacle {
    position: absolute;
    background-color: rgba(255, 0, 0, 0.3); 
    border: 2px solid red;
    pointer-events: none; 
}

.debug-safe-zone {
    position: absolute;
    border: 3px dashed green; 
    background-color: rgba(0, 255, 0, 0.05);
    pointer-events: none;
}

.debug-no-btn {
    position: absolute;
    border: 3px solid blue; 
    background-color: rgba(0, 0, 255, 0.2);
    pointer-events: none;
}

.arrow-debug-frozen {
    opacity: 1 !important;
    animation: none !important;
    transform: rotate(var(--rot)) translateX(0) !important;
    border: 1px solid blue; 
    background: rgba(0,0,255,0.1);
}